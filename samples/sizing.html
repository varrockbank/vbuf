<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>buffee - Editor Sizing</title>
  <script src="../buffee.js"></script>
  <link rel="stylesheet" href="../reset.css">
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../themes/boring.css">
  <style>
    .wb { font-size: 24px; }
  </style>
</head>
<body class="sample">
  <nav id="nav"></nav>
  <script>
    fetch('../navigation.html')
      .then(r => r.text())
      .then(html => document.getElementById('nav').innerHTML = html);
  </script>
  <p><a href="../index.html">home</a> / <a href="index.html">samples</a> / Editor Sizing</p>

  <h1>Editor Sizing</h1>
  <p>By default, the editor auto-fits to its container. Use <code>viewportRows</code> and <code>viewportCols</code> to fix dimensions.</p>

  <h2>1. Auto-rows, auto-cols (fill parent container)</h2>
  <p>Parent CSS: <code>div { width: 960px; height: 300px; padding: 20px;  }</code></p>
  <p>Editor CSS: <code>.wb { width: 100%; height: 100%; }</code></p>
  <p><code>new Buffee(el, {})</code></p>
  <p>Default behavior: auto-fit rows and cols to parent container. Drag bottom-right to resize.</p>
  <div style="width: 960px; height: 300px; padding: 20px; border: 2px dashed #666; resize: both; ">
    <blockquote class="wb no-select" tabindex="0" id="editor-auto-both" style="width: 100%; height: 100%;">
      <textarea class="wb-clipboard-bridge"></textarea>
      <div class="wb-content">
        <div class="wb-gutter"></div>
        <div class="wb-lines" style="flex: 1;"><div class="wb-layer-text"></div><div class="wb-layer-elements"></div><div class="wb-cursor"></div></div>
      </div>
      <div class="wb-status" style="display: flex; justify-content: space-between; ">
        <div><span class="wb-linecount"></span></div>
        <div style="display: flex;">
          <span class="wb-coordinate"></span>|
          
          <span class="wb-indentation"></span>
        </div>
      </div>
    </blockquote>
  </div>

  <h2>2. Auto-rows, auto-cols (fixed pixel size)</h2>
  <p>Parent CSS: <code>div { padding: 20px; }</code></p>
  <p>Editor CSS: <code>.wb { width: 640px; height: 300px; }</code></p>
  <p><code>new Buffee(el, {})</code></p>
  <p>Same as above but dimensions set directly on editor instead of inheriting from parent.</p>
  <div style="border: 2px dashed #666; padding: 20px;">
    <blockquote class="wb no-select" tabindex="0" id="editor-auto-both-px" style="width: 640px; height: 300px;">
      <textarea class="wb-clipboard-bridge"></textarea>
      <div class="wb-content">
        <div class="wb-gutter"></div>
        <div class="wb-lines" style="flex: 1;"><div class="wb-layer-text"></div><div class="wb-layer-elements"></div><div class="wb-cursor"></div></div>
      </div>
      <div class="wb-status" style="display: flex; justify-content: space-between; ">
        <div><span class="wb-linecount"></span></div>
        <div style="display: flex;">
          <span class="wb-coordinate"></span>|
          
          <span class="wb-indentation"></span>
        </div>
      </div>
    </blockquote>
  </div>

  <h2>3. Fixed-rows, fixed-cols</h2>
  <p>Parent CSS: <code>div { background: #ccc; padding: 20px; }</code></p>
  <p>Editor CSS: <code></code></p>
  <p><code>new Buffee(el, { viewportRows: 10, viewportCols: 50 })</code></p>
  <p>Width auto-calculated to fit exactly 50 text columns (plus gutter). Content extends beyond both dimensions.</p>
  <div style="border: 2px solid #666; padding: 20px;">
    <blockquote class="wb no-select" tabindex="0" id="editor-fixed">
      <textarea class="wb-clipboard-bridge"></textarea>
      <div class="wb-content">
        <div class="wb-gutter"></div>
        <div class="wb-lines" style="flex: 1;"><div class="wb-layer-text"></div><div class="wb-layer-elements"></div><div class="wb-cursor"></div></div>
      </div>
      <div class="wb-status" style="display: flex; justify-content: space-between; ">
        <div><span class="wb-linecount"></span></div>
        <div style="display: flex;">
          <span class="wb-coordinate"></span>|
          
          <span class="wb-indentation"></span>
        </div>
      </div>
    </blockquote>
  </div>

  <h2>4. Auto-rows, fixed-cols</h2>
  <p>Parent CSS: <code>div { height: 300px;  }</code></p>
  <p>Editor CSS: <code>.wb { height: 100%; }</code></p>
  <p><code>new Buffee(el, { viewportCols: 40 })</code></p>
  <div style="height: 300px; border: 2px dashed #666; padding: 20px; resize: vertical; ">
    <blockquote class="wb no-select" tabindex="0" id="editor-auto-rows-fixed-cols" style="height: 100%;">
      <textarea class="wb-clipboard-bridge"></textarea>
      <div class="wb-content">
        <div class="wb-gutter"></div>
        <div class="wb-lines" style="flex: 1;"><div class="wb-layer-text"></div><div class="wb-layer-elements"></div><div class="wb-cursor"></div></div>
      </div>
      <div class="wb-status" style="display: flex; justify-content: space-between; ">
        <div><span class="wb-linecount"></span></div>
        <div style="display: flex;">
          <span class="wb-coordinate"></span>|
          
          <span class="wb-indentation"></span>
        </div>
      </div>
    </blockquote>
  </div>

  <h2>5. Fixed-rows, auto-cols</h2>
  <p>Parent CSS: <code>div { width: 640px; padding: 20px;  }</code></p>
  <p>Editor CSS: <code>.wb { width: 100%; }</code></p>
  <p><code>new Buffee(el, { viewportRows: 8 })</code></p>
  <div style="width: 640px; border: 2px dashed #666; padding: 20px; resize: horizontal; ">
    <blockquote class="wb no-select" tabindex="0" id="editor-fixed-rows-auto-cols" style="width: 100%;">
      <textarea class="wb-clipboard-bridge"></textarea>
      <div class="wb-content">
        <div class="wb-gutter"></div>
        <div class="wb-lines" style="flex: 1;"><div class="wb-layer-text"></div><div class="wb-layer-elements"></div><div class="wb-cursor"></div></div>
      </div>
      <div class="wb-status" style="display: flex; justify-content: space-between; ">
        <div><span class="wb-linecount"></span></div>
        <div style="display: flex;">
          <span class="wb-coordinate"></span>|
          
          <span class="wb-indentation"></span>
        </div>
      </div>
    </blockquote>
  </div>

  <script>
    // Generate a ruler string: 01234567890123456789...
    function ruler(n) {
      let s = '';
      for (let i = 0; i < n; i++) s += i % 10;
      return s;
    }

    // 1. Auto-rows and auto-cols (default behavior)
    const edAutoBoth = new Buffee(document.getElementById('editor-auto-both'), {
    });
    edAutoBoth.Model.text = ruler(120) + '\n// Auto-rows and auto-cols\n// Drag corner to resize\n' +
      Array.from({length: 20}, (_, i) => `Line ${i + 4}`).join('\n');

    // 2. Auto-rows and auto-cols (pixel dimensions)
    const edAutoBothPx = new Buffee(document.getElementById('editor-auto-both-px'), {
    });
    edAutoBothPx.Model.text = ruler(120) + '\n// Auto-rows and auto-cols (pixel dimensions)\n// Dimensions on editor, not parent\n' +
      Array.from({length: 20}, (_, i) => `Line ${i + 4}`).join('\n');

    // 3. Fixed-rows, fixed-cols
    const edFixed = new Buffee(document.getElementById('editor-fixed'), {
      viewportRows: 10,
      viewportCols: 50,
    });
    edFixed.Model.text = ruler(40) + '\n' + Array.from({length: 15}, (_, i) => `Line ${i + 2}: This line is longer than 20 chars`).join('\n');

    // 4. Auto-rows, fixed cols
    const edAutoRowsFixedCols = new Buffee(document.getElementById('editor-auto-rows-fixed-cols'), {
      viewportCols: 40,
    });
    edAutoRowsFixedCols.Model.text = ruler(60) + '\n// Auto-rows, fixed 40 cols\n// Drag to resize height\n' +
      Array.from({length: 30}, (_, i) => `Line ${i + 4}`).join('\n');

    // 5. Fixed-rows, auto-cols
    const edFixedRowsAutoCols = new Buffee(document.getElementById('editor-fixed-rows-auto-cols'), {
      viewportRows: 8,
    });
    edFixedRowsAutoCols.Model.text = ruler(120) + '\n// Fixed 8 rows, auto-cols\nLine 3\n' +
      Array.from({length: 20}, (_, i) => `Line ${i + 4}`).join('\n');

  </script>
</body>
</html>
